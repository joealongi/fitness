<main
  id="main-content"
  style="
    min-height: 100vh;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    padding: 1rem;
  "
>
  <div class="container">
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 2rem">
      <h1
        style="
          font-size: 2.5rem;
          font-weight: 700;
          color: var(--text-primary);
          margin-bottom: 0.5rem;
        "
      >
        {{ title() }}
      </h1>
      <p style="font-size: 1.125rem; color: var(--text-secondary)">
        Log your workout to estimate VO2 max and learn its benefits.
      </p>
    </div>

    <div class="grid grid-cols-2">
      <!-- Workout Form -->
      <div class="card" style="padding: 1.5rem; margin-bottom: 2rem">
        <h2
          style="
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
          "
        >
          Log Workout
        </h2>

        <form
          (ngSubmit)="submitWorkout()"
          style="display: flex; flex-direction: column; gap: 1.5rem"
        >
          <!-- Activity Type -->
          <div>
            <label class="label" for="activity_type">Activity Type</label>
            <select
              [(ngModel)]="workout.activity_type"
              name="activity_type"
              id="activity_type"
              class="select"
            >
              <option value="run">ğŸƒ Run</option>
              <option value="cycle">ğŸš´ Cycle</option>
              <option value="walk">ğŸš¶ Walk</option>
            </select>
          </div>

          <!-- Duration -->
          <div>
            <label class="label" for="duration">Duration (minutes)</label>
            <input
              type="number"
              [(ngModel)]="workout.duration"
              name="duration"
              id="duration"
              required
              class="input"
              placeholder="30"
            />
          </div>

          <!-- Distance -->
          <div>
            <label class="label" for="distance">Distance (km)</label>
            <input
              type="number"
              step="0.1"
              [(ngModel)]="workout.distance"
              name="distance"
              id="distance"
              class="input"
              placeholder="5.0"
            />
          </div>

          <!-- Heart Rate Fields -->
          <div class="grid" style="grid-template-columns: 1fr 1fr">
            <div>
              <label class="label" for="heart_rate_avg">Avg Heart Rate (bpm)</label>
              <input
                type="number"
                [(ngModel)]="workout.heart_rate_avg"
                name="heart_rate_avg"
                id="heart_rate_avg"
                class="input"
                placeholder="150"
              />
            </div>
            <div>
              <label class="label" for="heart_rate_max">Max Heart Rate (bpm)</label>
              <input
                type="number"
                [(ngModel)]="workout.heart_rate_max"
                name="heart_rate_max"
                id="heart_rate_max"
                class="input"
                placeholder="180"
              />
            </div>
          </div>

          <!-- Intensity -->
          <div>
            <label class="label" for="intensity">Intensity</label>
            <select [(ngModel)]="workout.intensity" name="intensity" id="intensity" class="select">
              <option value="low">Low</option>
              <option value="moderate">Moderate</option>
              <option value="high">High</option>
            </select>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary" style="width: 100%; padding: 0.75rem 1rem">
            ğŸš€ Log Workout
          </button>
        </form>
      </div>

      <!-- Results Panel -->
      <div style="display: flex; flex-direction: column; gap: 1.5rem">
        <!-- VO2 Max Results -->
        <div *ngIf="workoutResult" class="card" style="padding: 1.5rem">
          <h3
            style="
              font-size: 1.25rem;
              font-weight: 600;
              color: var(--text-primary);
              margin-bottom: 1rem;
              display: flex;
              align-items: center;
            "
          >
            <span style="margin-right: 0.5rem">ğŸ“Š</span>
            Workout Results
          </h3>

          <div style="display: flex; flex-direction: column; gap: 1rem">
            <div
              style="
                background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
                padding: 1rem;
                border-radius: var(--border-radius);
                border: 1px solid #bfdbfe;
              "
            >
              <div
                style="
                  font-size: 0.875rem;
                  color: var(--primary-color);
                  font-weight: 500;
                  margin-bottom: 0.25rem;
                "
              >
                Estimated VO2 Max
              </div>
              <div style="font-size: 1.875rem; font-weight: 700; color: #1e40af">
                {{
                  workoutResult.vo2max_estimate
                    ? (workoutResult.vo2max_estimate | number : '1.1-1')
                    : 'N/A'
                }}
                <span style="font-size: 1.125rem; color: var(--primary-color)">mL/kg/min</span>
              </div>
            </div>

            <div
              style="
                background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
                padding: 1rem;
                border-radius: var(--border-radius);
                border: 1px solid #bbf7d0;
              "
            >
              <div
                style="
                  font-size: 0.875rem;
                  color: var(--success-color);
                  font-weight: 500;
                  margin-bottom: 0.5rem;
                "
              >
                Health Benefits
              </div>
              <div style="color: #166534; font-size: 0.875rem; line-height: 1.4">
                {{ workoutResult.benefits }}
              </div>
            </div>
          </div>
        </div>

        <!-- API Status -->
        <div class="card" style="padding: 1.5rem">
          <h3
            style="
              font-size: 1.25rem;
              font-weight: 600;
              color: var(--text-primary);
              margin-bottom: 1rem;
              display: flex;
              align-items: center;
            "
          >
            <span style="margin-right: 0.5rem">ğŸ”—</span>
            System Status
          </h3>

          <div style="display: flex; flex-direction: column; gap: 0.75rem">
            <div *ngIf="healthData" class="status-indicator status-success">
              <div class="status-dot success"></div>
              <span>Backend API - Connected</span>
            </div>

            <div *ngIf="norseData" class="status-indicator status-connected">
              <div class="status-dot connected"></div>
              <span>Norse SNN - Active</span>
            </div>
          </div>
        </div>

        <!-- Feature Highlights -->
        <div class="card" style="padding: 1.5rem">
          <h3
            style="
              font-size: 1.25rem;
              font-weight: 600;
              color: var(--text-primary);
              margin-bottom: 1rem;
              display: flex;
              align-items: center;
            "
          >
            <span style="margin-right: 0.5rem">âš¡</span>
            AI-Powered Features
          </h3>

          <div style="display: flex; flex-direction: column; gap: 0.75rem">
            <div class="feature-card">
              <div class="feature-icon gradient-blue">
                <span>ğŸ§ </span>
              </div>
              <div>
                <div style="font-weight: 500; color: var(--text-primary); margin-bottom: 0.25rem">
                  Spiking Neural Networks
                </div>
                <div style="font-size: 0.875rem; color: var(--text-secondary)">
                  Advanced temporal analysis for accurate VO2 max predictions
                </div>
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-icon gradient-green">
                <span>ğŸ—„ï¸</span>
              </div>
              <div>
                <div style="font-weight: 500; color: var(--text-primary); margin-bottom: 0.25rem">
                  Vector Database
                </div>
                <div style="font-size: 0.875rem; color: var(--text-secondary)">
                  ChromaDB for efficient fitness data storage and retrieval
                </div>
              </div>
            </div>

            <div class="feature-card">
              <div class="feature-icon gradient-purple">
                <span>ğŸ”Œ</span>
              </div>
              <div>
                <div style="font-weight: 500; color: var(--text-primary); margin-bottom: 0.25rem">
                  MCP Integration
                </div>
                <div style="font-size: 0.875rem; color: var(--text-secondary)">
                  External AI tools for enhanced fitness insights
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
